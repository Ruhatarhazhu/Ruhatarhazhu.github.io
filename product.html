<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Termék – Ruhatárház</title>
<link rel="icon" type="image/png" href="favicon.png">
<meta name="description" content="Ruhatárház prémium Vinted termék.">

<!-- Open Graph -->
<meta property="og:type" content="product">
<meta property="og:title" content="Ruhatárház termék">
<meta property="og:description" content="Nézd meg ezt a terméket a Ruhatárház oldalán.">
<meta property="og:image" content="">
<meta property="og:url" content="">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Inter',sans-serif;
  background:#f6f6f6;
  margin:0;
}
.wrapper{
  max-width:1000px;
  margin:60px auto;
  background:#fff;
  padding:40px;
  border-radius:20px;
  box-shadow:0 25px 80px rgba(0,0,0,.06);
}
.gallery{
  width:100%;
  aspect-ratio: 4 / 5;
  overflow:hidden;
  border-radius:16px;
  background:#f2f2f2;
  display:flex;
  align-items:center;
  justify-content:center;
}

.gallery img{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:16px;
}
.thumbs{
  display:flex;
  gap:10px;
  margin-top:15px;
}
.thumbs{
  display:flex;
  gap:12px;
  margin-top:18px;
  flex-wrap:wrap;
}

.thumbs img{
  width:70px;
  height:90px;
  object-fit:cover;
  border-radius:10px;
  cursor:pointer;
  transition:.3s;
  border:2px solid transparent;
}

.thumbs img:hover{
  border:2px solid #3a7d2e;
}
.price{
  font-size:20px;
  font-weight:600;
  margin:15px 0;
}
.button{
  display:inline-block;
  background:#3a7d2e;
  color:#fff;
  padding:12px 25px;
  border-radius:12px;
  text-decoration:none;
}
.back{
  display:inline-block;
  margin-bottom:20px;
  text-decoration:none;
  color:#555;
}
</style>
</head>
<body>

<div class="wrapper">
<a href="index.html" class="back">← Vissza</a>

<div class="gallery">
<img id="mainImg">
<div class="thumbs" id="thumbs"></div>
</div>

<h1 id="name"></h1>
<div class="price" id="price"></div>
<p id="description"></p>
<a id="vintedLink" target="_blank" class="button">Megnézem Vinteden</a>

</div>

<script>

const sheetURL="https://docs.google.com/spreadsheets/d/1PlqIBtGVKHCQIoDk4gAbIOIpRh_-bEGRXmexvaT5sos/export?format=csv";

function getSlug(){
  const params=new URLSearchParams(window.location.search);
  return params.get("slug");
}

function slugify(text){
  return text.toLowerCase().replace(/ /g,"-");
}

async function loadProduct(){
  const res=await fetch(sheetURL);
  const data=await res.text();
  const rows=data.split("\n").slice(1);
  const slug=getSlug();

  rows.forEach(row=>{
    const cols=row.split(",");
    if(cols.length<8) return;

    const name=cols[0].trim();
    const price=cols[1].trim();
    const images=cols[2].trim().split("|");
    const description=cols[3].trim();
    const link=cols[4].trim();

    if(slugify(name)===slug){

      document.title=name+" – Ruhatárház";
      document.querySelector('meta[name="description"]').setAttribute("content",description);
      document.querySelector('meta[property="og:title"]').setAttribute("content",name);
      document.querySelector('meta[property="og:description"]').setAttribute("content",description);
      document.querySelector('meta[property="og:image"]').setAttribute("content",images[0]);
      document.querySelector('meta[property="og:url"]').setAttribute("content",window.location.href);

      document.getElementById("name").innerText=name;
      document.getElementById("price").innerText=price+" Ft";
      document.getElementById("description").innerText=description;
      document.getElementById("vintedLink").href=link;

      document.getElementById("mainImg").src=images[0];

      const thumbs=document.getElementById("thumbs");
      images.forEach(img=>{
        const t=document.createElement("img");
        t.src=img;
        t.onclick=()=>document.getElementById("mainImg").src=img;
        thumbs.appendChild(t);
      });

    }
  });
}

loadProduct();

</script>

</body>
</html>
