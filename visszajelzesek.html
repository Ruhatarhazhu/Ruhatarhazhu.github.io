<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vásárlói visszajelzések – Ruhatárház</title>
<link rel="icon" type="image/png" href="favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --green:#3a7d2e;
  --border:#e8e8e8;
  --text:#1a1a1a;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Inter',sans-serif;background:#f6f6f6;color:var(--text);}

.wrapper{
  max-width:1200px;
  margin:50px auto;
  background:#fff;
  border-radius:24px;
  box-shadow:0 25px 80px rgba(0,0,0,.06);
  overflow:hidden;
}

header{
  position:sticky;
  top:0;
  background:#fff;
  display:flex;
  justify-content:center;
  padding:25px 0;
  border-bottom:1px solid var(--border);
}

header img{height:42px;}

.content{
  padding:40px;
}

.content h1{
  margin-bottom:30px;
}

.review{
  margin-bottom:30px;
  padding-bottom:20px;
  border-bottom:1px solid var(--border);
}

.review p{
  margin:8px 0;
  line-height:1.6;
}

.review small{
  color:#777;
  font-size:13px;
}

footer{
  padding:30px;
  text-align:center;
  border-top:1px solid var(--border);
  font-size:13px;
  color:#777;
}

  .review-form-block{
  margin-top:50px;
  padding-top:30px;
  border-top:1px solid var(--border);
}

.review-form-block h2{
  margin-bottom:20px;
}

#reviewForm{
  display:flex;
  flex-direction:column;
  gap:15px;
  max-width:500px;
}

#reviewForm input,
#reviewForm select,
#reviewForm textarea{
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--border);
  font-family:'Inter',sans-serif;
  font-size:14px;
}

#reviewForm textarea{
  resize:vertical;
  min-height:120px;
}

#reviewForm button{
  background:var(--green);
  color:white;
  border:none;
  padding:10px 16px;
  border-radius:12px;
  cursor:pointer;
  transition:.3s;
}

#reviewForm button:hover{
  background:var(--green-hover);
}
</style>
</head>

<body>
<div class="wrapper">

<header>
<a href="index.html">
  <img src="logo.webp" alt="Ruhatárház">
</a>
</header>

<div class="content">

<h1>Vásárlói visszajelzések</h1>

<div id="reviews-container"></div>

  <div style="margin-top:40px;">
  <div class="review-form-block">

  <h2>Írj véleményt</h2>

  <form id="reviewForm">

    <input type="text" name="entry.2005620554" placeholder="Név" required>

    <select name="entry.1166974658" required>
      <option value="">Értékelés</option>
      <option value="5">5 ⭐</option>
      <option value="4">4 ⭐</option>
      <option value="3">3 ⭐</option>
      <option value="2">2 ⭐</option>
      <option value="1">1 ⭐</option>
    </select>

    <textarea name="entry.839337160" placeholder="Írd meg a véleményed..." required></textarea>

    <button type="submit">Vélemény elküldése</button>

  </form>

  </div>


</div>

<footer>
© 2026 Ruhatárház – Minden termék Vinteden vásárolható.
</footer>

  <script>
const sheetID = "1EezLhOQZ8Qj72nOKqQ3ZE5awq7oU7oM_ZsWAvTbFg7k";
const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?`;

async function loadReviews(){
  const res = await fetch(url);
  const text = await res.text();

  const json = JSON.parse(text.substring(47).slice(0, -2));
  const rows = json.table.rows;

  const container = document.getElementById("reviews-container");
  container.innerHTML = "";

  rows.forEach(r => {
    const name = r.c[0]?.v || "";
    const rating = r.c[1]?.v || 0;
    const message = r.c[2]?.v || "";

    if(!name || !message) return;

    const stars = "⭐".repeat(parseInt(rating));

    container.innerHTML += `
      <div class="review">
        <p>${stars}</p>
        <p>"${message}"</p>
        <small>– ${name}</small>
      </div>
    `;
  });
}

loadReviews();
  </script>

  <script>
const form = document.getElementById("reviewForm");
const STORAGE_KEY = "ruhatarhaz_review_submitted";

// Ha már beküldött
if(localStorage.getItem(STORAGE_KEY)){
  form.innerHTML = "<p>Köszönjük, már küldtél be véleményt ❤️</p>";
}

form.addEventListener("submit", function(e){
  e.preventDefault();

  if(localStorage.getItem(STORAGE_KEY)){
    alert("Már küldtél be véleményt.");
    return;
  }

  const formData = new FormData(form);

  fetch("https://docs.google.com/forms/d/e/1FAIpQLSd-3dVMuyqTVFNl_UZvGz79tT3GGPuCdNRy4Nkxl75AfvvwUA/formResponse", {
    method: "POST",
    mode: "no-cors",
    body: formData
  });

  localStorage.setItem(STORAGE_KEY, "true");

  form.innerHTML = "<p>Köszönjük a visszajelzést ❤️</p>";
});
  </script>
  
</body>
</html>
