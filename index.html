<!DOCTYPE html><html lang="hu">
<head>
<link rel="icon" type="image/png" href="favicon.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="DivatShop – Minőségi second-hand ruhák, elérhetőek Vinteden.">
<title>Ruhatárház</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet"><style>
:root{
  --green:#3a7d2e;
  --green-hover:#2f6825;
  --border:#e8e8e8;
  --text:#1a1a1a;
  --muted:#777;
}

*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Inter',sans-serif;
  background:#f6f6f6;
  color:var(--text);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
} 

.wrapper{
  max-width:1200px;
  margin:60px auto;
  background:#ffffff;
  border-radius:24px;
  box-shadow:0 25px 80px rgba(0,0,0,0.06);
  overflow:hidden;
}
header{
  position:sticky;
  top:0;
  z-index:1000;
  background:rgba(255,255,255,0.85);
  backdrop-filter:blur(8px);
  display:flex;
  justify-content:center;
  align-items:center;
  padding:28px 0;
  border-bottom:1px solid var(--border);
  transition:all .35s ease;
}

header.scrolled{
  padding:14px 0;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

header.scrolled{
  padding:12px 0;
  box-shadow:0 8px 25px rgba(0,0,0,0.08);
}

header img{
  height:48px;
  transition:all .3s ease;
}

header.scrolled img{
  height:38px;
}

@media(max-width:600px){
  header img{
    height:34px;
  }
  header.scrolled img{
    height:28px;
  }
}

.products{display:grid;grid-template-columns:repeat(4,1fr);gap:30px;padding:30px;}

.card{border:1px solid var(--border);border-radius:16px;padding:15px;text-align:center;transition:.3s;position:relative;background:#fff;}
.card:hover{transform:translateY(-6px);box-shadow:0 15px 35px rgba(0,0,0,0.12);} 
.card img{width:100%;border-radius:12px;margin-bottom:12px;cursor:pointer;} 
.price{font-weight:600;margin:6px 0;} 

.vinted-btn{display:inline-block;background:linear-gradient(135deg,var(--green),var(--green-hover));color:#fff;padding:9px 20px;border-radius:10px;text-decoration:none;font-size:13px;transition:.3s;} 
.vinted-btn:hover{transform:scale(1.05);} 

.badge{
  position:absolute;
  top:12px;
  left:12px;
  background:#111;
  color:#fff;
  font-size:11px;
  padding:5px 8px;
  border-radius:6px;
}

.badge.new{background:var(--green);} 

.hidden{display:none;}

/* MODAL */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:999;}
.modal-content{background:#fff;width:95%;max-width:800px;border-radius:16px;padding:30px;position:relative;}
.close{text-align:right;cursor:pointer;font-size:14px;margin-bottom:10px;}

.gallery-main{position:relative;overflow:hidden;}
.gallery-main img{width:100%;border-radius:12px;margin-bottom:15px;transition:transform .3s ease;}
.gallery-main img.zoomed{transform:scale(2);cursor:zoom-out;} 

.gallery-thumbs{display:flex;gap:10px;margin-bottom:20px;}
.gallery-thumbs img{width:80px;height:80px;object-fit:cover;border-radius:8px;cursor:pointer;border:2px solid transparent;}
.gallery-thumbs img.active{border:2px solid var(--green);} 

.description{font-size:14px;color:#555;margin-top:10px;line-height:1.5;} 

@media(max-width:1000px){.products{grid-template-columns:repeat(2,1fr);} }
@media(max-width:600px){.products{grid-template-columns:1fr;} }
</style></head>
<body><!-- Scroll Progress Bar --><div id="progressBar" style="position:fixed;top:0;left:0;height:3px;width:0;background:linear-gradient(90deg,#3a7d2e,#2f6825);z-index:2000;transition:width .2s ease;"></div><div class="wrapper">
<header style="display:flex;align-items:center;">
  <img src="logo.webp" alt="Ruhatárház logó" style="height:40px;">
</header><section class="products">  <div class="card" data-sold="false" data-new="true"
       data-images="product1.jpg,product1b.jpg,product1c.jpg"
       data-description="Elegáns oversized blézer kiváló állapotban. Tökéletes tavaszi darab.">
    <img src="product1.jpg" onclick="openModal(this)">
    <h3><a href="product-blezer.html" style="text-decoration:none;color:inherit;">Oversized Blézer</a></h3>
    <div class="price">4 990 Ft</div>
    <a href="#" target="_blank" class="vinted-btn">Megnézem Vinteden</a>
  </div>  <div class="card" data-sold="true" data-new="false"
       data-images="product2.jpg,product2b.jpg"
       data-description="Vintage farmer magas derékkal, hibátlan állapot.">
    <img src="product2.jpg" onclick="openModal(this)">
    <h3><a href="product-farmer.html" style="text-decoration:none;color:inherit;">Vintage Farmer</a></h3>
    <div class="price">3 490 Ft</div>
    <a href="#" class="vinted-btn">Eladva</a>
  </div></section>
</div><!-- MODAL --><div class="modal" id="productModal">
  <div class="modal-content">
    <div class="close" onclick="closeModal()">Bezárás ✕</div>
    <div class="gallery-main">
      <img id="modalMainImg" onclick="toggleZoom(this)">
    </div>
    <div class="gallery-thumbs" id="modalThumbs"></div>
    <h3 id="modalTitle"></h3>
    <div id="modalPrice" class="price"></div>
    <div id="modalDescription" class="description"></div>
  </div>
</div><script>

/* Badge kezelés */
document.querySelectorAll('.card').forEach(card=>{
  if(card.dataset.sold==='true'){
    const badge=document.createElement('div');
    badge.className='badge';
    badge.innerText='ELADVA';
    card.appendChild(badge);
  } else if(card.dataset.new==='true'){
    const badge=document.createElement('div');
    badge.className='badge new';
    badge.innerText='ÚJ';
    card.appendChild(badge);
  }
});

/* Modal galéria + swipe */
let currentIndex=0;
let images=[];

function openModal(img){
  const card=img.closest('.card');
  images=card.dataset.images.split(',');
  currentIndex=0;

  updateMainImage();

  document.getElementById('modalTitle').innerText=card.querySelector('h3').innerText;
  document.getElementById('modalPrice').innerText=card.querySelector('.price').innerText;
  document.getElementById('modalDescription').innerText=card.dataset.description;

  const thumbs=document.getElementById('modalThumbs');
  thumbs.innerHTML='';

  images.forEach((src,i)=>{
    const thumb=document.createElement('img');
    thumb.src=src;
    if(i===0) thumb.classList.add('active');
    thumb.onclick=function(){currentIndex=i;updateMainImage();};
    thumbs.appendChild(thumb);
  });

  document.getElementById('productModal').style.display='flex';
}

function updateMainImage(){
  const main=document.getElementById('modalMainImg');
  main.src=images[currentIndex];
  document.querySelectorAll('.gallery-thumbs img').forEach((t,i)=>{
    t.classList.toggle('active',i===currentIndex);
  });
}

function closeModal(){
  document.getElementById('productModal').style.display='none';
}

/* Swipe mobilon */
let startX=0;
document.getElementById('modalMainImg').addEventListener('touchstart',e=>{
  startX=e.touches[0].clientX;
});

document.getElementById('modalMainImg').addEventListener('touchend',e=>{
  let endX=e.changedTouches[0].clientX;
  if(endX<startX-50 && currentIndex<images.length-1){currentIndex++;updateMainImage();}
  if(endX>startX+50 && currentIndex>0){currentIndex--;updateMainImage();}
});

/* Zoom */
function toggleZoom(img){
  img.classList.toggle('zoomed');
}


/* Sticky animáció */
window.addEventListener('scroll', function(){
  const header = document.querySelector('header');
  if(window.scrollY > 50){
    header.classList.add('scrolled');
  } else {
    header.classList.remove('scrolled');
  }
});


/* Scroll progress bar */
window.addEventListener('scroll', function(){
  const scrollTop = window.scrollY;
  const docHeight = document.body.scrollHeight - window.innerHeight;
  const progress = (scrollTop / docHeight) * 100;
  document.getElementById('progressBar').style.width = progress + '%';
});

/* Sticky animáció */
window.addEventListener('scroll', function(){
  const header = document.querySelector('header');
  if(window.scrollY > 50){
    header.classList.add('scrolled');
  } else {
    header.classList.remove('scrolled');
  }
});

</script></body>

<script>

const sheetURL = "https://docs.google.com/spreadsheets/d/1PlqIBtGVKHCQIoDk4gAbIOIpRh_-bEGRXmexvaT5sos/export?format=csv";

async function loadProducts() {
  const res = await fetch(sheetURL);
  const data = await res.text();

  const rows = data.split("\n").slice(1);
  const grid = document.querySelector(".products");
  grid.innerHTML = "";

  rows.forEach(row => {
    if (!row.trim()) return;

    const cols = row.split(",");
    if (cols.length < 7) return;

    const name = cols[0];
    const price = cols[1];
    const images = cols[2];
    const description = cols[3];
    const vinted_link = cols[4];
    const isNew = cols[5];
    const isSold = cols[6];

    const imageArray = images.split("|");

    const card = document.createElement("div");
    card.className = "card";
    card.dataset.images = imageArray.join(",");
    card.dataset.description = description;
    card.dataset.new = isNew;
    card.dataset.sold = isSold;

    card.innerHTML = `
      <img src="${imageArray[0]}" onclick="openModal(this)">
      <h3>${name}</h3>
      <div class="price">${price} Ft</div>
      <a href="${vinted_link}" target="_blank" class="vinted-btn">
        ${isSold === "TRUE" ? "Eladva" : "Megnézem Vinteden"}
      </a>
    `;

    if (isSold === "TRUE") {
      const badge = document.createElement("div");
      badge.className = "badge";
      badge.innerText = "ELADVA";
      card.appendChild(badge);
    } else if (isNew === "TRUE") {
      const badge = document.createElement("div");
      badge.className = "badge new";
      badge.innerText = "ÚJ";
      card.appendChild(badge);
    }

    grid.appendChild(card);
  });
}

loadProducts();

</script>
</html>
