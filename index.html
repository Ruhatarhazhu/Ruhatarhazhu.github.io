<!DOCTYPE html><html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ruhatárház</title>
<link rel="icon" type="image/png" href="favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet"><style>
:root{
  --green:#3a7d2e;
  --green-hover:#2f6825;
  --border:#e8e8e8;
  --text:#1a1a1a;
}

*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Inter',sans-serif;background:#f6f6f6;color:var(--text);} 

.wrapper{max-width:1200px;margin:40px auto;background:#fff;border-radius:24px;box-shadow:0 25px 80px rgba(0,0,0,0.06);overflow:hidden;} 

header{display:flex;justify-content:center;padding:20px;border-bottom:1px solid var(--border);} 
header img{height:38px;} 

.controls{display:flex;gap:15px;flex-wrap:wrap;padding:20px;border-bottom:1px solid var(--border);} 
select{padding:8px 12px;border-radius:8px;border:1px solid var(--border);} 

.products{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;padding:30px;} 

.card{border:1px solid var(--border);border-radius:18px;padding:15px;background:#fff;transition:.3s;cursor:pointer;} 
.card:hover{transform:translateY(-4px);box-shadow:0 10px 25px rgba(0,0,0,0.1);} 

.card img{width:100%;height:200px;object-fit:cover;border-radius:14px;margin-bottom:10px;} 
.price{font-weight:600;margin:5px 0;} 

.pagination{display:flex;justify-content:center;gap:10px;padding:20px;} 
.pagination button{padding:6px 12px;border:1px solid var(--border);background:#fff;border-radius:6px;cursor:pointer;} 
.pagination button.active{background:var(--green);color:#fff;} 

.modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;} 
.modal img{max-width:90%;max-height:90%;border-radius:12px;} 

@media(max-width:900px){.products{grid-template-columns:repeat(2,1fr);} }
@media(max-width:600px){.products{grid-template-columns:1fr;} }
</style></head>
<body><div class="wrapper">
<header><img src="logo.webp" alt="Ruhatárház"></header><div class="controls">
<select id="categoryFilter"><option value="all">Összes kategória</option></select>
<select id="sortPrice">
<option value="default">Ár szerint</option>
<option value="low">Olcsóbb elöl</option>
<option value="high">Drágább elöl</option>
</select>
</div><section class="products"></section>
<div class="pagination"></div></div><div class="modal" id="imageModal" onclick="this.style.display='none'">
<img id="modalImg">
</div><script>

const sheetURL="https://docs.google.com/spreadsheets/d/1PlqIBtGVKHCQIoDk4gAbIOIpRh_-bEGRXmexvaT5sos/export?format=csv";
let products=[];
let currentPage=1;
const perPage=6;

async function loadProducts(){
const res=await fetch(sheetURL);
const data=await res.text();
const rows=data.split("\n").slice(1);
products=[];

rows.forEach(row=>{
if(!row.trim()) return;
const cols=row.split(",");
if(cols.length<8) return;
products.push({
name:cols[0],
price:parseInt(cols[1]),
image:cols[2].split("|")[0],
category:cols[7]||"Egyéb"
});
});

initCategories();
render();
}

function initCategories(){
const select=document.getElementById("categoryFilter");
const cats=[...new Set(products.map(p=>p.category))];
select.innerHTML='<option value="all">Összes kategória</option>';
cats.forEach(cat=>{
select.innerHTML+=`<option value="${cat}">${cat}</option>`;
});
}

function render(){
let filtered=[...products];
const cat=document.getElementById("categoryFilter").value;
const sort=document.getElementById("sortPrice").value;

if(cat!="all") filtered=filtered.filter(p=>p.category===cat);

if(sort==="low") filtered.sort((a,b)=>a.price-b.price);
if(sort==="high") filtered.sort((a,b)=>b.price-a.price);

const start=(currentPage-1)*perPage;
const paginated=filtered.slice(start,start+perPage);

const grid=document.querySelector(".products");
grid.innerHTML="";

paginated.forEach(p=>{
const card=document.createElement("div");
card.className="card";
card.innerHTML=`<img src="${p.image}" loading="lazy"><h3>${p.name}</h3><div class="price">${p.price} Ft</div>`;
card.onclick=()=>openModal(p.image);
grid.appendChild(card);
});

renderPagination(filtered.length);
}

function renderPagination(total){
const pages=Math.ceil(total/perPage);
const container=document.querySelector(".pagination");
container.innerHTML="";
for(let i=1;i<=pages;i++){
const btn=document.createElement("button");
btn.textContent=i;
if(i===currentPage) btn.classList.add("active");
btn.onclick=()=>{currentPage=i;render();};
container.appendChild(btn);
}
}

function openModal(src){
document.getElementById("modalImg").src=src;
document.getElementById("imageModal").style.display="flex";
}

document.getElementById("categoryFilter").addEventListener("change",()=>{currentPage=1;render();});
document.getElementById("sortPrice").addEventListener("change",()=>{currentPage=1;render();});

loadProducts();

</script></body>
</html>
